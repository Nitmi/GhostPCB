# Gerber 文件格式参考

## 常见文件扩展名

| 扩展名 | 层类型 | 说明 |
|--------|--------|------|
| `.GTL` | TopLayer | 顶层铜箔 |
| `.GBL` | BottomLayer | 底层铜箔 |
| `.GTO` | TopSilkscreen | 顶层丝印 ⭐ 主要混淆目标 |
| `.GBO` | BottomSilkscreen | 底层丝印 ⭐ 主要混淆目标 |
| `.GTS` | TopSolderMask | 顶层阻焊 |
| `.GBS` | BottomSolderMask | 底层阻焊 |
| `.GTP` | TopPaste | 顶层锡膏 |
| `.GBP` | BottomPaste | 底层锡膏 |
| `.GKO` | BoardOutline | 板框外形 |
| `.G1`-`.Gn` | InnerLayer | 内层 |
| `.DRL` | Drill | 钻孔文件 (Excellon 格式) |

## Gerber 文件结构

```gerber
G04 这是注释*
%FSLAX36Y36*%           ; 格式说明：绝对坐标，X/Y 各 3.6 位
%MOIN*%                 ; 单位：英寸 (或 %MOMM*% 毫米)
%ADD10C,0.010*%         ; 定义 D10 为圆形光圈，直径 0.010
%ADD11R,0.020X0.030*%   ; 定义 D11 为矩形光圈
D10*                    ; 选择 D10 光圈
X100000Y200000D03*      ; 在 (100000, 200000) 闪光
X150000Y200000D01*      ; 画线到 (150000, 200000)
M02*                    ; 文件结束
```

## 关键指令

### 坐标指令

- `D01` - 画线（光圈打开移动）
- `D02` - 移动（光圈关闭移动）
- `D03` - 闪光（在当前位置曝光）

### 格式指令

- `%FS...%` - 格式说明（坐标精度）
- `%MO...%` - 单位（IN/MM）
- `%AD...%` - 光圈定义

### 时间戳位置

通常在文件头部注释中：

```gerber
G04 CREATED DATE: 2024-01-15*
G04 Generated by EasyEDA*
```

## 混淆策略对应文件

| 策略 | 目标文件 | 修改内容 |
|------|----------|----------|
| 时间戳修改 | 所有文件 | `G04` 注释中的日期时间 |
| 丝印扰动 | `.GTO`, `.GBO` | 坐标微调、字体缩放 |
| 几何扰动 | `.DRL`, 所有层 | 钻孔/过孔坐标偏移 |
| 结构混淆 | 所有 Gerber | 指令顺序、坐标格式 |
| 物理微调 | `.GKO` | 外框尺寸、倒角半径 |

## 坐标精度

常见格式：`%FSLAX36Y36*%`

- `L` = Leading zeros omitted（省略前导零）
- `A` = Absolute coordinates（绝对坐标）
- `X36` = X 坐标 3 位整数 + 6 位小数
- 实际值 = 原始值 × 10^(-6)

例如：`X123456` 在 `X36` 格式下表示 `0.123456` 单位

## 安全混淆范围

- 坐标偏移: ±0.01mm ~ ±0.05mm（丝印层可更大）
- 钻孔偏移: ±0.02mm（公差范围内）
- 过孔直径: ±0.01mm
- 外框尺寸: ±0.01mm
- 倒角半径: ±0.05mm
